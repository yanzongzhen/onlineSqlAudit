webpackJsonp([8],{116:function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}function o(t,e,n){n="string"==typeof e?[e]:e;for(var i=t.$parent,o=i.$options.name;i&&(!o||n.indexOf(o)<0);)(i=i.$parent)&&(o=i.$options.name);return i}e.b=i,n.d(e,"a",function(){return o});var a=n(2),r=a.default.prototype.$isServer;!r&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)},290:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(116);e.default={name:"iCircle",props:{percent:{type:Number,default:0},size:{type:Number,default:120},strokeWidth:{type:Number,default:6},strokeColor:{type:String,default:"#2d8cf0"},strokeLinecap:{validator:function(t){return n.i(i.b)(t,["square","round"])},default:"round"},trailWidth:{type:Number,default:5},trailColor:{type:String,default:"#eaeef2"},dashboard:{type:Boolean,default:!1}},computed:{circleSize:function(){return{width:this.size+"px",height:this.size+"px"}},computedStrokeWidth:function(){return 0===this.percent&&this.dashboard?0:this.strokeWidth},radius:function(){return 50-this.strokeWidth/2},pathString:function(){return this.dashboard?"M 50,50 m 0,"+this.radius+"\n                a "+this.radius+","+this.radius+" 0 1 1 0,-"+2*this.radius+"\n                a "+this.radius+","+this.radius+" 0 1 1 0,"+2*this.radius:"M 50,50 m 0,-"+this.radius+"\n                a "+this.radius+","+this.radius+" 0 1 1 0,"+2*this.radius+"\n                a "+this.radius+","+this.radius+" 0 1 1 0,-"+2*this.radius},len:function(){return 2*Math.PI*this.radius},trailStyle:function(){var t={};return this.dashboard&&(t={"stroke-dasharray":this.len-75+"px "+this.len+"px","stroke-dashoffset":"-37.5px",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"}),t},pathStyle:function(){return this.dashboard?{"stroke-dasharray":this.percent/100*(this.len-75)+"px "+this.len+"px","stroke-dashoffset":"-37.5px",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .6s ease 0s, stroke .6s, stroke-width .06s ease .6s"}:{"stroke-dasharray":this.len+"px "+this.len+"px","stroke-dashoffset":(100-this.percent)/100*this.len+"px",transition:"stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease"}},wrapClasses:function(){return"ivu-chart-circle"},innerClasses:function(){return"ivu-chart-circle-inner"}}}},296:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n.n(i),a=n(632),r=n.n(a);e.default={components:{ICircle:r.a},name:"Sqltable",data:function(){return{loading:!1,sql_columns:[{title:"sql语句",key:"sql"}],columns:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"工单编号:",key:"work_id",sortable:!0,sortType:"desc",width:200},{title:"工单说明:",key:"text",tooltip:!0},{title:"是否备份",key:"backup",width:100},{title:"提交时间:",key:"date",sortable:!0},{title:"提交账号",key:"username",sortable:!0},{title:"真实姓名",key:"real_name",sortable:!0},{title:"执行人",key:"executor",sortable:!0},{title:"状态",key:"status",width:150,render:function(t,e){var n=e.row,i="",o="";return 2===n.status?(i="primary",o="待审核"):0===n.status?(i="error",o="驳回"):1===n.status?(i="success",o="已执行"):4===n.status?(i="error",o="执行失败"):5===n.status?(i="primary",o="待执行"):(i="warning",o="执行中"),t("Tag",{props:{type:"dot",color:i}},o)},sortable:!0},{title:"操作",key:"action",width:150,align:"center",slot:"action"}],modal2:!1,sql:[],formitem:{workid:"",date:"",username:"",dataadd:"",database:"",att:"",id:null,delay:null},summit:!0,columnsName:[{title:"ID",key:"ID",width:60,fixed:"left"},{title:"阶段状态",key:"stagestatus",width:150},{title:"当前检查的sql",key:"sql",width:500},{title:"错误信息",key:"errormessage",width:300},{title:"影响行数",key:"affected_rows",width:90},{title:"SQLSHA1",key:"SQLSHA1",width:200}],dataId:[],reject:{reje:!1,textarea:""},tableData:[],pagenumber:1,delrecord:[],togoing:null,osc:!1,oscsha1:"",osclist:[],percent:0,consuming:"00:00",callback_time:null,switch_show:!0,multi:Boolean,auth:sessionStorage.getItem("auth"),multi_list:{},multi_name:"",reboot:null,valve:!0,find:{picker:[],user:"",valve:!1}}},methods:{openOrder:function(t){var e=this;console.log("order_type",this.tableData[t].type),this.summit=!0,this.sql=[],this.togoing=t,this.dataId=[],this.modal2=!0,this.formitem=this.tableData[t],2===this.tableData[t].status?this.switch_show=!0:this.switch_show=!1,o.a.get(this.$config.url+"/getsql?id="+this.formitem.id+"&bundle_id="+this.formitem.bundle_id).then(function(t){var n=t.data.sql.split(";"),i=!0,o=!1,a=void 0;try{for(var r,s=n[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=r.value;e.sql.push({sql:l})}}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}e.formitem.computer_room=t.data.comRoom,e.formitem.connection_name=t.data.conn}).catch(function(t){e.$config.err_notice(e,t)})},agreedTo:function(){var t=this;""===this.multi_name?this.$Message.error("请选择执行人!"):o.a.put(this.$config.url+"/audit_sql",{type:2,perform:this.multi_name,work_id:this.formitem.work_id,username:this.formitem.username}).then(function(e){t.$config.notice(e.data),t.modal2=!1,t.refreshData(t.$refs.page.currentPage)}).catch(function(e){t.$config.err_notice(t,e)})},performTo:function(){var t=this;this.modal2=!1,this.tableData[this.togoing].status=3,2===this.formitem.type?o.a.put(this.$config.url+"/audit_sql",{type:3,to_user:this.formitem.username,id:this.formitem.id}).then(function(e){t.$config.notice(e.data),t.refreshData(t.$refs.page.currentPage)}).catch(function(e){t.$config.err_notice(t,e)}):o.a.put(this.$config.url+"/audit_sql",{type:1,to_user:this.formitem.username,id:this.formitem.id}).then(function(e){t.$config.notice(e.data),t.refreshData(t.$refs.page.currentPage)}).catch(function(e){t.$config.err_notice(t,e)})},rejectTo:function(){this.modal2=!1,this.reject.reje=!0},testTo:function(){var t=this;this.loading=!0,this.osclist=[],o.a.put(this.$config.url+"/audit_sql",{type:"test",base:this.formitem.basename,id:this.formitem.id}).then(function(e){200===e.data.status?(t.dataId=e.data.result,t.osclist=t.dataId.filter(function(t){if(""!==t.SQLSHA1)return t}),t.summit=!1,t.loading=!1):t.$config.err_notice(t,e.data.status)}).catch(function(e){t.$config.err_notice(t,e)})},rejectText:function(){var t=this;o.a.put(this.$config.url+"/audit_sql",{type:0,text:this.reject.textarea,to_user:this.formitem.username,id:this.formitem.id}).then(function(e){t.$config.notice(e.data),t.refreshData(t.$refs.page.currentPage)}).catch(function(e){t.$config.err_notice(t,e)})},orderDetail:function(t){this.$router.push({name:"orderlist",query:{workid:t.work_id,id:t.id,status:1,type:t.type}})},refreshData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o.a.get(this.$config.url+"/audit_sql?page="+e+"&query="+JSON.stringify(this.find)).then(function(e){if(t.multi=e.data.multi,!t.multi)for(var n=0;n<t.columns.length;n++)"executor"===t.columns[n].key&&t.columns.splice(n,1);t.tableData=e.data.data,t.tableData.forEach(function(t){1===t.backup?t.backup="是":t.backup="否"}),t.pagenumber=e.data.page,t.multi_list=e.data.multi_list}).catch(function(e){t.$config.err_notice(t,e)})},delrecordList:function(t){this.delrecord=t},delrecordData:function(){var t=this,e=this.$refs.page.currentPage;this.tableData.length===this.delrecord.length&&(e-=1),o.a.post(this.$config.url+"/undoOrder",{id:JSON.stringify(this.delrecord)}).then(function(n){t.$config.notice(n.data),t.refreshData(e)}).catch(function(e){t.$config.err_notice(t,e)})},setpOSC:function(t){var e=this;this.callback_time=setInterval(function(){o.a.get(e.$config.url+"/osc/"+t).then(function(t){void 0!==t.data[0]?(e.percent=t.data[0].PERCENT,e.consuming=t.data[0].REMAINTIME):(e.percent=100,clearInterval(e.callback_time))}).catch(function(t){return console.log(t)})},1e3)},openOSC:function(){this.oscsha1="",this.osc=!0},stopOSC:function(){var t=this;o.a.delete(this.$config.url+"/osc/"+this.oscsha1).then(function(e){t.$config.notice(e.data)}).catch(function(e){return t.$config.err_notice(t,e)})},callback_method:function(){clearInterval(this.callback_time)},refreshForm:function(t){if(t){var e=this;this.reboot=setInterval(function(){e.refreshData(e.$refs.page.currentPage)},5e3)}else clearInterval(this.reboot)},queryData:function(){this.find.valve=!0,this.refreshData()},queryCancel:function(){this.find=this.$config.clearObj(this.find),this.refreshData()}},mounted:function(){this.refreshData(),this.refreshForm(this.valve)},destroyed:function(){clearInterval(this.reboot)}}},332:function(t,e,n){e=t.exports=n(75)(!0),e.push([t.i,'.demo-spin-icon-load{animation:ani-demo-spin 1s linear infinite}.margin-top-8{margin-top:8px}.margin-top-10{margin-top:10px}.margin-top-20{margin-top:20px}.margin-left-10{margin-left:10px}.margin-bottom-10{margin-bottom:10px}.margin-bottom-100{margin-bottom:100px}.margin-right-10{margin-right:10px}.padding-left-6{padding-left:6px}.padding-left-8{padding-left:5px}.padding-left-10{padding-left:10px}.padding-left-20{padding-left:20px}.height-100{height:100%}.height-120px{height:100px}.height-200px{height:200px}.height-492px{height:492px}.height-460px{height:460px}.line-gray{height:0;border-bottom:2px solid #dcdcdc}.notwrap{word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.padding-left-5{padding-left:10px}[v-cloak]{display:none}.dragging-tip-enter-active{opacity:1;transition:opacity .3s}.dragging-tip-enter,.dragging-tip-leave-to{opacity:0;transition:opacity .3s}.dragging-tip-con{display:block;text-align:center;width:100%;height:50px}.dragging-tip-con span{font-size:18px}.record-tip-con{display:block;width:100%;height:292px;overflow:auto}.record-item{box-sizing:content-box;display:block;overflow:hidden;height:24px;line-height:24px;padding:8px 10px;border-bottom:1px dashed #dcdcdc}.record-tip-con span{font-size:14px}.edittable-test-con{min-height:600px}.edittable-testauto-con{height:100%}.edittable-table-height-con{min-height:600px}.edittable-table-height1-con{height:200px}.edittable-con-1{box-sizing:content-box;padding:15px 0 0;height:550px}.exportable-table-download-con1{padding:16px 0 16px 20px;border-bottom:1px dashed #c3c3c3;margin-bottom:16px}.exportable-table-download-con2{padding-left:20px}.show-image{padding:20px 0}.show-image img{display:block;width:100%;height:auto}.demo-Circle-custom h1{color:#3f414d;font-size:28px;font-weight:400}.demo-Circle-custom p{color:#657180;font-size:14px;margin:10px 0 15px}.demo-Circle-custom span{display:block;padding-top:15px;color:#657180;font-size:14px}.demo-Circle-custom span:before{content:"";display:block;width:50px;height:1px;margin:0 auto;background:#e0e3e6;position:relative;top:-15px}.demo-Circle-custom span i{font-style:normal;color:#3f414d}p{word-wrap:break-word;word-break:break-all;overflow:hidden}',"",{version:3,sources:["E:/inspur_projects/Audit/webpage/src/components/audit/sqlAudit.vue"],names:[],mappings:"AACA,qBACE,0CAA4C,CAC7C,AACD,cACE,cAAgB,CACjB,AACD,eACE,eAAiB,CAClB,AACD,eACE,eAAiB,CAClB,AACD,gBACE,gBAAkB,CACnB,AACD,kBACE,kBAAoB,CACrB,AACD,mBACE,mBAAqB,CACtB,AACD,iBACE,iBAAmB,CACpB,AACD,gBACE,gBAAkB,CACnB,AACD,gBACE,gBAAkB,CACnB,AACD,iBACE,iBAAmB,CACpB,AACD,iBACE,iBAAmB,CACpB,AACD,YACE,WAAa,CACd,AACD,cACE,YAAc,CACf,AACD,cACE,YAAc,CACf,AACD,cACE,YAAc,CACf,AACD,cACE,YAAc,CACf,AACD,WACE,SAAU,AACV,+BAAiC,CAClC,AACD,SACE,oBAAqB,AACrB,mBAAoB,AACpB,gBAAiB,AACjB,sBAAwB,CACzB,AACD,gBACE,iBAAmB,CACpB,AACD,UACE,YAAc,CACf,AACD,2BACE,UAAW,AACX,sBAAyB,CAC1B,AACD,2CAEE,UAAW,AACX,sBAAyB,CAC1B,AACD,kBACE,cAAe,AACf,kBAAmB,AACnB,WAAY,AACZ,WAAa,CACd,AACD,uBACE,cAAgB,CACjB,AACD,gBACE,cAAe,AACf,WAAY,AACZ,aAAc,AACd,aAAe,CAChB,AACD,aACE,uBAAwB,AACxB,cAAe,AACf,gBAAiB,AACjB,YAAa,AACb,iBAAkB,AAClB,iBAAkB,AAClB,gCAAoC,CACrC,AACD,qBACE,cAAgB,CACjB,AACD,oBACE,gBAAkB,CACnB,AACD,wBACE,WAAa,CACd,AACD,4BACE,gBAAkB,CACnB,AACD,6BACE,YAAc,CACf,AACD,iBACE,uBAAwB,AACxB,iBAAkB,AAClB,YAAc,CACf,AACD,gCACE,yBAA0B,AAC1B,iCAAkC,AAClC,kBAAoB,CACrB,AACD,gCACE,iBAAmB,CACpB,AACD,YACE,cAAgB,CACjB,AACD,gBACE,cAAe,AACf,WAAY,AACZ,WAAa,CACd,AACD,uBACE,cAAe,AACf,eAAgB,AAChB,eAAoB,CACrB,AACD,sBACE,cAAe,AACf,eAAgB,AAChB,kBAAoB,CACrB,AACD,yBACE,cAAe,AACf,iBAAkB,AAClB,cAAe,AACf,cAAgB,CACjB,AACD,gCACE,WAAY,AACZ,cAAe,AACf,WAAY,AACZ,WAAY,AACZ,cAAe,AACf,mBAAoB,AACpB,kBAAmB,AACnB,SAAW,CACZ,AACD,2BACE,kBAAmB,AACnB,aAAe,CAChB,AACD,EACE,qBAAsB,AACtB,qBAAsB,AACtB,eAAiB,CAClB",file:"sqlAudit.vue",sourcesContent:["\n.demo-spin-icon-load {\n  animation: ani-demo-spin 1s linear infinite;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.dragging-tip-enter-active {\n  opacity: 1;\n  transition: opacity 0.3s;\n}\n.dragging-tip-enter,\n.dragging-tip-leave-to {\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n.dragging-tip-con {\n  display: block;\n  text-align: center;\n  width: 100%;\n  height: 50px;\n}\n.dragging-tip-con span {\n  font-size: 18px;\n}\n.record-tip-con {\n  display: block;\n  width: 100%;\n  height: 292px;\n  overflow: auto;\n}\n.record-item {\n  box-sizing: content-box;\n  display: block;\n  overflow: hidden;\n  height: 24px;\n  line-height: 24px;\n  padding: 8px 10px;\n  border-bottom: 1px dashed gainsboro;\n}\n.record-tip-con span {\n  font-size: 14px;\n}\n.edittable-test-con {\n  min-height: 600px;\n}\n.edittable-testauto-con {\n  height: 100%;\n}\n.edittable-table-height-con {\n  min-height: 600px;\n}\n.edittable-table-height1-con {\n  height: 200px;\n}\n.edittable-con-1 {\n  box-sizing: content-box;\n  padding: 15px 0 0;\n  height: 550px;\n}\n.exportable-table-download-con1 {\n  padding: 16px 0 16px 20px;\n  border-bottom: 1px dashed #c3c3c3;\n  margin-bottom: 16px;\n}\n.exportable-table-download-con2 {\n  padding-left: 20px;\n}\n.show-image {\n  padding: 20px 0;\n}\n.show-image img {\n  display: block;\n  width: 100%;\n  height: auto;\n}\n.demo-Circle-custom h1 {\n  color: #3f414d;\n  font-size: 28px;\n  font-weight: normal;\n}\n.demo-Circle-custom p {\n  color: #657180;\n  font-size: 14px;\n  margin: 10px 0 15px;\n}\n.demo-Circle-custom span {\n  display: block;\n  padding-top: 15px;\n  color: #657180;\n  font-size: 14px;\n}\n.demo-Circle-custom span:before {\n  content: '';\n  display: block;\n  width: 50px;\n  height: 1px;\n  margin: 0 auto;\n  background: #e0e3e6;\n  position: relative;\n  top: -15px;\n}\n.demo-Circle-custom span i {\n  font-style: normal;\n  color: #3f414d;\n}\np {\n  word-wrap: break-word;\n  word-break: break-all;\n  overflow: hidden;\n}\n"],sourceRoot:""}])},610:function(t,e,n){var i=n(332);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(76)("5c9d7135",i,!0,{})},632:function(t,e,n){var i=n(1)(n(290),n(640),null,null,null);t.exports=i.exports},640:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.wrapClasses,style:t.circleSize},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{style:t.trailStyle,attrs:{d:t.pathString,stroke:t.trailColor,"stroke-width":t.trailWidth,"fill-opacity":0}}),t._v(" "),n("path",{style:t.pathStyle,attrs:{d:t.pathString,"stroke-linecap":t.strokeLinecap,stroke:t.strokeColor,"stroke-width":t.computedStrokeWidth,"fill-opacity":"0"}})]),t._v(" "),n("div",{class:t.innerClasses},[t._t("default")],2)])},staticRenderFns:[]}},644:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"md-person"}}),t._v("\n        工单审核\n      ")],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"24"}},[n("Form",{attrs:{inline:""}},[n("FormItem",[n("Poptip",{attrs:{confirm:"",title:"您确认删除这些工单信息吗?"},on:{"on-ok":t.delrecordData}},[n("Button",{attrs:{type:"warning"}},[t._v("删除记录")])],1)],1),t._v(" "),n("FormItem",[n("Poptip",{attrs:{trigger:"hover",title:"提示",content:"此开关用于打开实时表格数据更新功能"}},[n("i-switch",{attrs:{size:"large"},on:{"on-change":t.refreshForm},model:{value:t.valve,callback:function(e){t.valve=e},expression:"valve"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("打开")]),t._v(" "),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1),t._v(" "),n("FormItem",[n("Input",{attrs:{placeholder:"账号名"},model:{value:t.find.user,callback:function(e){t.$set(t.find,"user",e)},expression:"find.user"}})],1),t._v(" "),n("FormItem",[n("DatePicker",{staticStyle:{width:"250px"},attrs:{format:"yyyy-MM-dd HH:mm",type:"datetimerange",placeholder:"请选择查询的时间范围"},on:{"on-change":function(e){t.find.picker=e}},model:{value:t.find.picker,callback:function(e){t.$set(t.find,"picker",e)},expression:"find.picker"}})],1),t._v(" "),n("FormItem",[n("Button",{attrs:{type:"success"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:t.queryCancel}},[t._v("重置")])],1)],1),t._v(" "),n("Table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.tableData,stripe:""},on:{"on-selection-change":t.delrecordList},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row,o=e.index;return[n("div",[n("Button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.openOrder(o)}}},[t._v("查看")]),t._v(" "),2!==i.status&&3!==i.status?n("Button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.orderDetail(i)}}},[t._v("\n                  执行结果\n                ")]):t._e(),t._v(" "),3===i.status&&0===i.type?n("Button",{attrs:{type:"text",size:"small"},on:{click:t.openOSC}},[t._v("osc进度\n                ")]):t._e()],1)]}}])}),t._v(" "),n("br"),t._v(" "),n("Page",{ref:"page",attrs:{total:t.pagenumber,"show-elevator":"","page-size":20},on:{"on-change":t.refreshData}})],1)],1)],1)],1),t._v(" "),n("Modal",{attrs:{width:"1000"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[n("p",{staticStyle:{color:"#f60","font-size":"16px"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"information-circled"}}),t._v(" "),n("span",[t._v("SQL工单详细信息")])],1),t._v(" "),n("Form",{attrs:{"label-position":"right"}},[n("FormItem",{attrs:{label:"机房:"}},[n("span",[t._v(t._s(t.formitem.computer_room))])]),t._v(" "),n("FormItem",{attrs:{label:"连接名称:"}},[n("span",[t._v(t._s(t.formitem.connection_name))])]),t._v(" "),n("FormItem",{attrs:{label:"数据库库名:"}},[n("span",[t._v(t._s(t.formitem.basename))])]),t._v(" "),n("FormItem",{attrs:{label:"定时执行:"}},[n("span",[t._v(t._s(t.formitem.delay))])]),t._v(" "),n("FormItem",{attrs:{label:"工单说明:"}},[n("span",[t._v(t._s(t.formitem.text))])]),t._v(" "),n("FormItem",[n("Table",{attrs:{columns:t.sql_columns,data:t.sql,height:"200"}})],1),t._v(" "),t.multi&&"admin"===t.auth?n("FormItem",{attrs:{label:"选择执行人:",required:""}},[n("Select",{staticStyle:{width:"20%"},model:{value:t.multi_name,callback:function(e){t.multi_name=e},expression:"multi_name"}},t._l(t.multi_list,function(e){return n("Option",{key:e.username,attrs:{value:e.username}},[t._v(t._s(e.username))])}),1)],1):t._e()],1),t._v(" "),[n("p",{staticClass:"pa"},[t._v("SQL检查结果:")]),t._v(" "),n("Table",{attrs:{columns:t.columnsName,data:t.dataId,stripe:"",border:"",height:"200"}})],t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"warning",loading:t.loading},nativeOn:{click:function(e){return t.testTo()}}},[t.loading?n("span",[t._v("检测中")]):n("span",[t._v("检测sql")])]),t._v(" "),n("Button",{on:{click:function(e){t.modal2=!1}}},[t._v("取消")]),t._v(" "),t.switch_show?[t.multi?["admin"===t.auth?n("Button",{attrs:{type:"error",disabled:t.summit},on:{click:function(e){return t.rejectTo()}}},[t._v("驳回")]):n("Button",{attrs:{type:"error"},on:{click:function(e){return t.rejectTo()}}},[t._v("驳回")]),t._v(" "),"admin"===t.auth?n("Button",{attrs:{type:"success",disabled:t.summit},on:{click:function(e){return t.agreedTo()}}},[t._v("同意")]):"perform"===t.auth?n("Button",{attrs:{type:"success"},on:{click:function(e){return t.performTo()}}},[t._v("执行")]):t._e()]:[n("Button",{attrs:{type:"error",disabled:t.summit},on:{click:function(e){return t.rejectTo()}}},[t._v("驳回")]),t._v(" "),n("Button",{attrs:{type:"success",disabled:t.summit},on:{click:function(e){return t.performTo()}}},[t._v("执行")])]]:t._e()],2)],2),t._v(" "),n("Modal",{on:{"on-ok":t.rejectText},model:{value:t.reject.reje,callback:function(e){t.$set(t.reject,"reje",e)},expression:"reject.reje"}},[n("p",{staticStyle:{color:"#f60","font-size":"16px"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"information-circled"}}),t._v(" "),n("span",[t._v("SQL工单驳回理由说明")])],1),t._v(" "),n("Input",{attrs:{type:"textarea",autosize:{minRows:15,maxRows:15},placeholder:"请填写驳回说明"},model:{value:t.reject.textarea,callback:function(e){t.$set(t.reject,"textarea",e)},expression:"reject.textarea"}})],1),t._v(" "),n("Modal",{attrs:{title:"osc进度查看窗口",closable:!1,"mask-closable":!1,"ok-text":"终止osc","cancel-text":"关闭窗口"},on:{"on-cancel":t.callback_method,"on-ok":t.stopOSC},model:{value:t.osc,callback:function(e){t.osc=e},expression:"osc"}},[n("Form",[n("FormItem",{attrs:{label:"SQL语句SHA1值"}},[n("Select",{staticStyle:{width:"70%"},attrs:{transfer:""},on:{"on-change":t.setpOSC},model:{value:t.oscsha1,callback:function(e){t.oscsha1=e},expression:"oscsha1"}},t._l(t.osclist,function(e){return n("Option",{key:e.SQLSHA1,attrs:{value:e.SQLSHA1}},[t._v(t._s(e.SQLSHA1))])}),1)],1),t._v(" "),n("FormItem",{attrs:{label:"osc进度详情图表"}},[n("i-circle",{attrs:{size:250,"trail-width":4,"stroke-width":5,percent:t.percent,"stroke-linecap":"square","stroke-color":"#43a3fb"}},[n("div",{staticClass:"demo-Circle-custom"},[n("p",[t._v("已完成")]),t._v(" "),n("h1",[t._v(t._s(t.percent)+"%")]),t._v(" "),n("br"),t._v(" "),n("span",[t._v("\n              距离完成还差\n              "),n("i",[t._v(t._s(t.consuming))])])])])],1)],1)],1)],1)},staticRenderFns:[]}},83:function(t,e,n){function i(t){n(610)}var o=n(1)(n(296),n(644),i,null,null);t.exports=o.exports}});
//# sourceMappingURL=8.5c23734cae14cf8a22f5.js.map