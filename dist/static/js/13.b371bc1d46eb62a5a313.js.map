{"version":3,"sources":["webpack:///static/js/13.b371bc1d46eb62a5a313.js","webpack:///workFlow.vue?89dd","webpack:///./src/components/query/workFlow.vue?827d*","webpack:///./src/components/query/workFlow.vue?15d5*","webpack:///./src/components/query/workFlow.vue?96a6*","webpack:///./src/components/query/workFlow.vue?930e"],"names":["webpackJsonp","190","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_axios__","__WEBPACK_IMPORTED_MODULE_0_axios___default","n","name","props","data","stepData","title","describe","sessionStorage","getItem","step","remark","computer_room","connection_name","person","export","stepList1","stepRules","opinion","required","message","trigger","basename","item","personlist","datalist","connection_name_list","basenamelist","sqllist","computer_roomlist","this","$config","methods","Connection_Name","val","ScreenConnection","filter","handleSubmit","_this","$refs","validate","valid","a","put","url","mode","instructions","audit","real_name","then","$router","push","mounted","_this2","permissions_type","res","catch","error","err_notice","191","exports","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","209","content","locals","211","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","attrs","span","type","show-icon","slot","ref","model","rules","label-width","label","prop","on","on-change","callback","$$v","$set","expression","_l","key","filterable","autosize","minRows","maxRows","placeholder","staticStyle","width","click","margin-left","staticRenderFns","77","injectStyle","ssrContext","Component"],"mappings":"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","file":"static/js/13.b371bc1d46eb62a5a313.js","sourcesContent":["webpackJsonp([13],{\n\n/***/ 190:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_axios__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'work_flow',\n  props: ['msg'],\n  data: function data() {\n    return {\n      stepData: {\n        title: 'Yearning SQL查询系统',\n        describe: '\\u6B22\\u8FCE\\u4F60\\uFF01 ' + sessionStorage.getItem('user')\n      },\n      step: {\n        remark: '',\n        computer_room: '',\n        connection_name: '',\n        person: '',\n        export: '0'\n      },\n      stepList1: [{\n        title: '提交',\n        describe: '提交查询申请'\n      }, {\n        title: '审核',\n        describe: '等待审核结果'\n      }, {\n        title: '查询',\n        describe: '审核完毕，进入查询页面'\n      }],\n      stepRules: {\n        opinion: [{ required: true, message: '请填写查询说明', trigger: 'blur' }],\n        computer_room: [{\n          required: true,\n          message: '机房地址不得为空',\n          trigger: 'change'\n        }],\n        connection_name: [{\n          required: true,\n          message: '连接名不得为空',\n          trigger: 'change'\n        }],\n        basename: [{\n          required: true,\n          message: '数据库名不得为空',\n          trigger: 'change'\n        }],\n        person: [{\n          required: true,\n          message: '审核人不得为空',\n          trigger: 'change'\n        }]\n      },\n      item: {},\n      personlist: [],\n      datalist: {\n        connection_name_list: [],\n        basenamelist: [],\n        sqllist: [],\n        computer_roomlist: this.$config.computer_room\n      }\n    };\n  },\n\n  methods: {\n    Connection_Name: function Connection_Name(val) {\n      this.datalist.connection_name_list = [];\n      this.datalist.basenamelist = [];\n      this.step.connection_name = '';\n      this.step.basename = '';\n      if (val) {\n        this.ScreenConnection(val);\n      }\n    },\n    ScreenConnection: function ScreenConnection(val) {\n      this.datalist.connection_name_list = this.item.filter(function (item) {\n        if (item.computer_room === val) {\n          return item;\n        }\n      });\n    },\n    handleSubmit: function handleSubmit() {\n      var _this = this;\n\n      this.$refs['step'].validate(function (valid) {\n        if (valid) {\n          __WEBPACK_IMPORTED_MODULE_0_axios___default.a.put(_this.$config.url + '/query_worklf', {\n            'mode': 'put',\n            'instructions': _this.step.opinion,\n            'connection_name': _this.step.connection_name,\n            'computer_room': _this.step.computer_room,\n            'export': _this.step.export,\n            'audit': _this.step.person,\n            'real_name': sessionStorage.getItem('real_name')\n          }).then(function () {\n            _this.$router.push({\n              name: 'queryready'\n            });\n          });\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    __WEBPACK_IMPORTED_MODULE_0_axios___default.a.put(this.$config.url + '/workorder/connection', { 'permissions_type': 'query' }).then(function (res) {\n      _this2.item = res.data['connection'];\n      _this2.personlist = res.data['assigend'];\n      _this2.datalist.computer_roomlist = res.data['custom'];\n    }).catch(function (error) {\n      _this2.$config.err_notice(_this2, error);\n    });\n    __WEBPACK_IMPORTED_MODULE_0_axios___default.a.put(this.$config.url + '/query_worklf', { 'mode': 'status' }).then(function (res) {\n      if (res.data === 1) {\n        _this2.$router.push({\n          name: 'querypage'\n        });\n      } else if (res.data === 2) {\n        _this2.$router.push({\n          name: 'queryready'\n        });\n      }\n    });\n  }\n});\n\n/***/ }),\n\n/***/ 191:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(75)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".step-header-con{text-align:center}.step-header-con h3{margin:10px 0}.step-header-con h5{margin:0 0 5px}.step-content{padding:5px 20px 26px}.step-content,.step-form{margin-bottom:20px;border-bottom:1px solid #dbdddf}.step-form{padding-bottom:10px}\", \"\", {\"version\":3,\"sources\":[\"E:/inspur_projects/Audit/webpage/src/components/query/workFlow.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,iBAAmB,CACpB,AACD,oBACE,aAAe,CAChB,AACD,oBACE,cAAgB,CACjB,AACD,cACE,qBAAuB,CAGxB,AACD,yBAHE,mBAAoB,AACpB,+BAAiC,CAMlC,AAJD,WACE,mBAAqB,CAGtB\",\"file\":\"workFlow.vue\",\"sourcesContent\":[\"\\n.step-header-con {\\n  text-align: center;\\n}\\n.step-header-con h3 {\\n  margin: 10px 0;\\n}\\n.step-header-con h5 {\\n  margin: 0 0 5px;\\n}\\n.step-content {\\n  padding: 5px 20px 26px;\\n  margin-bottom: 20px;\\n  border-bottom: 1px solid #dbdddf;\\n}\\n.step-form {\\n  padding-bottom: 10px;\\n  border-bottom: 1px solid #dbdddf;\\n  margin-bottom: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 209:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(191);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(76)(\"02a4ac89\", content, true, {});\n\n/***/ }),\n\n/***/ 211:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('Row', [_c('Card', [_c('div', {\n    staticClass: \"step-header-con\"\n  }, [_c('h3', [_vm._v(_vm._s(_vm.stepData.title))]), _vm._v(\" \"), _c('h5', [_vm._v(_vm._s(_vm.stepData.describe))])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"step-content\"\n  }), _vm._v(\" \"), _c('Row', [_c('i-col', {\n    attrs: {\n      \"span\": \"8\"\n    }\n  }, [_c('Alert', {\n    attrs: {\n      \"type\": \"warning\",\n      \"show-icon\": \"\"\n    }\n  }, [_vm._v(\"\\n            注意事项:\\n            \"), _c('span', {\n    attrs: {\n      \"slot\": \"desc\"\n    },\n    slot: \"desc\"\n  }, [_vm._v(\"\\n            1.必须填写查询说明\\n            \"), _c('br'), _vm._v(\"\\n            2.根据查询条件预估所需的查询时间\\n            \"), _c('br'), _vm._v(\"\\n            3.所有提交的查询语句均会进行审计记录\\n            \"), _c('br'), _vm._v(\"\\n            4.仅支持select语句,不可使用非查询语句\\n            \"), _c('br'), _vm._v(\"\\n            5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则已平台配置的Limit数为准\\n          \")])])], 1), _vm._v(\" \"), _c('i-col', {\n    attrs: {\n      \"span\": \"12\"\n    }\n  }, [_c('Form', {\n    ref: \"step\",\n    attrs: {\n      \"model\": _vm.step,\n      \"rules\": _vm.stepRules,\n      \"label-width\": 150\n    }\n  }, [_c('FormItem', {\n    attrs: {\n      \"label\": \"机房:\",\n      \"prop\": \"computer_room\"\n    }\n  }, [_c('Select', {\n    on: {\n      \"on-change\": _vm.Connection_Name\n    },\n    model: {\n      value: (_vm.step.computer_room),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"computer_room\", $$v)\n      },\n      expression: \"step.computer_room\"\n    }\n  }, _vm._l((_vm.datalist.computer_roomlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"连接名:\",\n      \"prop\": \"connection_name\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\"\n    },\n    model: {\n      value: (_vm.step.connection_name),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"connection_name\", $$v)\n      },\n      expression: \"step.connection_name\"\n    }\n  }, _vm._l((_vm.datalist.connection_name_list), function(i) {\n    return _c('Option', {\n      key: i.connection_name,\n      attrs: {\n        \"value\": i.connection_name\n      }\n    }, [_vm._v(_vm._s(i.connection_name) + \"\\n                \")])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"审核人:\",\n      \"prop\": \"person\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\"\n    },\n    model: {\n      value: (_vm.step.person),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"person\", $$v)\n      },\n      expression: \"step.person\"\n    }\n  }, _vm._l((_vm.personlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"是否需要导出数据:\",\n      \"prop\": \"export\"\n    }\n  }, [_c('RadioGroup', {\n    model: {\n      value: (_vm.step.export),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"export\", $$v)\n      },\n      expression: \"step.export\"\n    }\n  }, [_c('Radio', {\n    attrs: {\n      \"label\": \"1\"\n    }\n  }, [_vm._v(\"是\")]), _vm._v(\" \"), _c('Radio', {\n    attrs: {\n      \"label\": \"0\"\n    }\n  }, [_vm._v(\"否\")])], 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询说明：\",\n      \"prop\": \"opinion\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"type\": \"textarea\",\n      \"autosize\": {\n        minRows: 4,\n        maxRows: 8\n      },\n      \"placeholder\": \"请填写查询说明\"\n    },\n    model: {\n      value: (_vm.step.opinion),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"opinion\", $$v)\n      },\n      expression: \"step.opinion\"\n    }\n  })], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('Button', {\n    staticStyle: {\n      \"width\": \"100px\"\n    },\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.handleSubmit\n    }\n  }, [_vm._v(\"提交\")])], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('Steps', {\n    staticStyle: {\n      \"margin-left\": \"10%\"\n    }\n  }, _vm._l((_vm.stepList1), function(item) {\n    return _c('Step', {\n      key: item.title,\n      attrs: {\n        \"title\": item.title,\n        \"content\": item.describe\n      }\n    })\n  }), 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 77:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(209)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(190),\n  /* template */\n  __webpack_require__(211),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/13.b371bc1d46eb62a5a313.js","<template>\r\n  <div>\r\n    <Row>\r\n      <Card>\r\n        <div class=\"step-header-con\">\r\n          <h3>{{ stepData.title }}</h3>\r\n          <h5>{{ stepData.describe }}</h5>\r\n        </div>\r\n        <p class=\"step-content\"></p>\r\n        <Row>\r\n          <i-col span=\"8\">\r\n            <Alert type=\"warning\" show-icon>\r\n              注意事项:\r\n              <span slot=\"desc\">\r\n              1.必须填写查询说明\r\n              <br>\r\n              2.根据查询条件预估所需的查询时间\r\n              <br>\r\n              3.所有提交的查询语句均会进行审计记录\r\n              <br>\r\n              4.仅支持select语句,不可使用非查询语句\r\n              <br>\r\n              5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则已平台配置的Limit数为准\r\n            </span>\r\n            </Alert>\r\n          </i-col>\r\n          <i-col span=\"12\">\r\n            <Form ref=\"step\" :model=\"step\" :rules=\"stepRules\" :label-width=\"150\">\r\n              <FormItem label=\"机房:\" prop=\"computer_room\">\r\n                <Select v-model=\"step.computer_room\" @on-change=\"Connection_Name\">\r\n                  <Option v-for=\"i in datalist.computer_roomlist\" :key=\"i\" :value=\"i\">{{i}}</Option>\r\n                </Select>\r\n              </FormItem>\r\n\r\n              <FormItem label=\"连接名:\" prop=\"connection_name\">\r\n                <Select v-model=\"step.connection_name\" filterable>\r\n                  <Option v-for=\"i in datalist.connection_name_list\" :value=\"i.connection_name\"\r\n                          :key=\"i.connection_name\">{{ i.connection_name }}\r\n                  </Option>\r\n                </Select>\r\n              </FormItem>\r\n              <FormItem label=\"审核人:\" prop=\"person\">\r\n                <Select v-model=\"step.person\" filterable>\r\n                  <Option v-for=\"i in personlist\" :value=\"i\" :key=\"i\">{{ i }}</Option>\r\n                </Select>\r\n              </FormItem>\r\n              <FormItem label=\"是否需要导出数据:\" prop=\"export\">\r\n                <RadioGroup v-model=\"step.export\">\r\n                  <Radio label=\"1\">是</Radio>\r\n                  <Radio label=\"0\">否</Radio>\r\n                </RadioGroup>\r\n              </FormItem>\r\n              <FormItem label=\"查询说明：\" prop=\"opinion\">\r\n                <Input v-model=\"step.opinion\" type=\"textarea\" :autosize=\"{minRows: 4,maxRows: 8}\"\r\n                       placeholder=\"请填写查询说明\"/>\r\n              </FormItem>\r\n              <FormItem label=\"\">\r\n                <Button @click=\"handleSubmit\" style=\"width:100px;\" type=\"primary\">提交</Button>\r\n              </FormItem>\r\n            </Form>\r\n          </i-col>\r\n        </Row>\r\n        <Steps style=\"margin-left: 10%\">\r\n          <Step v-for=\"item in stepList1\" :title=\"item.title\" :content=\"item.describe\" :key=\"item.title\"></Step>\r\n        </Steps>\r\n      </Card>\r\n    </Row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  //\r\n  import axios from 'axios'\r\n\r\n  export default {\r\n    name: 'work_flow',\r\n    props: ['msg'],\r\n    data () {\r\n      return {\r\n        stepData: {\r\n          title: 'Yearning SQL查询系统',\r\n          describe: `欢迎你！ ${sessionStorage.getItem('user')}`\r\n        },\r\n        step: {\r\n          remark: '',\r\n          computer_room: '',\r\n          connection_name: '',\r\n          person: '',\r\n          export: '0'\r\n        },\r\n        stepList1: [\r\n          {\r\n            title: '提交',\r\n            describe: '提交查询申请'\r\n          },\r\n          {\r\n            title: '审核',\r\n            describe: '等待审核结果'\r\n          },\r\n          {\r\n            title: '查询',\r\n            describe: '审核完毕，进入查询页面'\r\n          }\r\n        ],\r\n        stepRules: {\r\n          opinion: [\r\n            {required: true, message: '请填写查询说明', trigger: 'blur'}\r\n          ],\r\n          computer_room: [{\r\n            required: true,\r\n            message: '机房地址不得为空',\r\n            trigger: 'change'\r\n          }],\r\n          connection_name: [{\r\n            required: true,\r\n            message: '连接名不得为空',\r\n            trigger: 'change'\r\n          }],\r\n          basename: [{\r\n            required: true,\r\n            message: '数据库名不得为空',\r\n            trigger: 'change'\r\n          }],\r\n          person: [{\r\n            required: true,\r\n            message: '审核人不得为空',\r\n            trigger: 'change'\r\n          }]\r\n        },\r\n        item: {},\r\n        personlist: [],\r\n        datalist: {\r\n          connection_name_list: [],\r\n          basenamelist: [],\r\n          sqllist: [],\r\n          computer_roomlist: this.$config.computer_room\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      Connection_Name (val) {\r\n        this.datalist.connection_name_list = []\r\n        this.datalist.basenamelist = []\r\n        this.step.connection_name = ''\r\n        this.step.basename = ''\r\n        if (val) {\r\n          this.ScreenConnection(val)\r\n        }\r\n      },\r\n      ScreenConnection (val) {\r\n        this.datalist.connection_name_list = this.item.filter(item => {\r\n          if (item.computer_room === val) {\r\n            return item\r\n          }\r\n        })\r\n      },\r\n      handleSubmit () {\r\n        this.$refs['step'].validate((valid) => {\r\n          if (valid) {\r\n            axios.put(`${this.$config.url}/query_worklf`, {\r\n              'mode': 'put',\r\n              'instructions': this.step.opinion,\r\n              'connection_name': this.step.connection_name,\r\n              'computer_room': this.step.computer_room,\r\n              'export': this.step.export,\r\n              'audit': this.step.person,\r\n              'real_name': sessionStorage.getItem('real_name')\r\n            })\r\n              .then(() => {\r\n                this.$router.push({\r\n                  name: 'queryready'\r\n                })\r\n              })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    mounted () {\r\n      axios.put(`${this.$config.url}/workorder/connection`, {'permissions_type': 'query'})\r\n        .then(res => {\r\n          this.item = res.data['connection']\r\n          this.personlist = res.data['assigend']\r\n          this.datalist.computer_roomlist = res.data['custom']\r\n        })\r\n        .catch(error => {\r\n          this.$config.err_notice(this, error)\r\n        })\r\n      axios.put(`${this.$config.url}/query_worklf`, {'mode': 'status'})\r\n        .then(res => {\r\n          if (res.data === 1) {\r\n            this.$router.push({\r\n              name: 'querypage'\r\n            })\r\n          } else if (res.data === 2) {\r\n            this.$router.push({\r\n              name: 'queryready'\r\n            })\r\n          }\r\n        })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  .step {\r\n    &-header-con {\r\n      text-align: center;\r\n      h3 {\r\n        margin: 10px 0;\r\n      }\r\n      h5 {\r\n        margin: 0 0 5px;\r\n      }\r\n    }\r\n    &-content {\r\n      padding: 5px 20px 26px;\r\n      margin-bottom: 20px;\r\n      border-bottom: 1px solid #dbdddf;\r\n    }\r\n    &-form {\r\n      padding-bottom: 10px;\r\n      border-bottom: 1px solid #dbdddf;\r\n      margin-bottom: 20px;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// workFlow.vue?0bc66f14","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".step-header-con{text-align:center}.step-header-con h3{margin:10px 0}.step-header-con h5{margin:0 0 5px}.step-content{padding:5px 20px 26px}.step-content,.step-form{margin-bottom:20px;border-bottom:1px solid #dbdddf}.step-form{padding-bottom:10px}\", \"\", {\"version\":3,\"sources\":[\"E:/inspur_projects/Audit/webpage/src/components/query/workFlow.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,iBAAmB,CACpB,AACD,oBACE,aAAe,CAChB,AACD,oBACE,cAAgB,CACjB,AACD,cACE,qBAAuB,CAGxB,AACD,yBAHE,mBAAoB,AACpB,+BAAiC,CAMlC,AAJD,WACE,mBAAqB,CAGtB\",\"file\":\"workFlow.vue\",\"sourcesContent\":[\"\\n.step-header-con {\\n  text-align: center;\\n}\\n.step-header-con h3 {\\n  margin: 10px 0;\\n}\\n.step-header-con h5 {\\n  margin: 0 0 5px;\\n}\\n.step-content {\\n  padding: 5px 20px 26px;\\n  margin-bottom: 20px;\\n  border-bottom: 1px solid #dbdddf;\\n}\\n.step-form {\\n  padding-bottom: 10px;\\n  border-bottom: 1px solid #dbdddf;\\n  margin-bottom: 20px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2f7ff72a\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/query/workFlow.vue\n// module id = 191\n// module chunks = 1 13","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2f7ff72a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/less-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./workFlow.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"02a4ac89\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2f7ff72a\",\"scoped\":false,\"hasInlineConfig\":false}!./~/less-loader?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/query/workFlow.vue\n// module id = 209\n// module chunks = 1 13","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('Row', [_c('Card', [_c('div', {\n    staticClass: \"step-header-con\"\n  }, [_c('h3', [_vm._v(_vm._s(_vm.stepData.title))]), _vm._v(\" \"), _c('h5', [_vm._v(_vm._s(_vm.stepData.describe))])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"step-content\"\n  }), _vm._v(\" \"), _c('Row', [_c('i-col', {\n    attrs: {\n      \"span\": \"8\"\n    }\n  }, [_c('Alert', {\n    attrs: {\n      \"type\": \"warning\",\n      \"show-icon\": \"\"\n    }\n  }, [_vm._v(\"\\n            注意事项:\\n            \"), _c('span', {\n    attrs: {\n      \"slot\": \"desc\"\n    },\n    slot: \"desc\"\n  }, [_vm._v(\"\\n            1.必须填写查询说明\\n            \"), _c('br'), _vm._v(\"\\n            2.根据查询条件预估所需的查询时间\\n            \"), _c('br'), _vm._v(\"\\n            3.所有提交的查询语句均会进行审计记录\\n            \"), _c('br'), _vm._v(\"\\n            4.仅支持select语句,不可使用非查询语句\\n            \"), _c('br'), _vm._v(\"\\n            5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则已平台配置的Limit数为准\\n          \")])])], 1), _vm._v(\" \"), _c('i-col', {\n    attrs: {\n      \"span\": \"12\"\n    }\n  }, [_c('Form', {\n    ref: \"step\",\n    attrs: {\n      \"model\": _vm.step,\n      \"rules\": _vm.stepRules,\n      \"label-width\": 150\n    }\n  }, [_c('FormItem', {\n    attrs: {\n      \"label\": \"机房:\",\n      \"prop\": \"computer_room\"\n    }\n  }, [_c('Select', {\n    on: {\n      \"on-change\": _vm.Connection_Name\n    },\n    model: {\n      value: (_vm.step.computer_room),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"computer_room\", $$v)\n      },\n      expression: \"step.computer_room\"\n    }\n  }, _vm._l((_vm.datalist.computer_roomlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"连接名:\",\n      \"prop\": \"connection_name\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\"\n    },\n    model: {\n      value: (_vm.step.connection_name),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"connection_name\", $$v)\n      },\n      expression: \"step.connection_name\"\n    }\n  }, _vm._l((_vm.datalist.connection_name_list), function(i) {\n    return _c('Option', {\n      key: i.connection_name,\n      attrs: {\n        \"value\": i.connection_name\n      }\n    }, [_vm._v(_vm._s(i.connection_name) + \"\\n                \")])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"审核人:\",\n      \"prop\": \"person\"\n    }\n  }, [_c('Select', {\n    attrs: {\n      \"filterable\": \"\"\n    },\n    model: {\n      value: (_vm.step.person),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"person\", $$v)\n      },\n      expression: \"step.person\"\n    }\n  }, _vm._l((_vm.personlist), function(i) {\n    return _c('Option', {\n      key: i,\n      attrs: {\n        \"value\": i\n      }\n    }, [_vm._v(_vm._s(i))])\n  }), 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"是否需要导出数据:\",\n      \"prop\": \"export\"\n    }\n  }, [_c('RadioGroup', {\n    model: {\n      value: (_vm.step.export),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"export\", $$v)\n      },\n      expression: \"step.export\"\n    }\n  }, [_c('Radio', {\n    attrs: {\n      \"label\": \"1\"\n    }\n  }, [_vm._v(\"是\")]), _vm._v(\" \"), _c('Radio', {\n    attrs: {\n      \"label\": \"0\"\n    }\n  }, [_vm._v(\"否\")])], 1)], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"查询说明：\",\n      \"prop\": \"opinion\"\n    }\n  }, [_c('Input', {\n    attrs: {\n      \"type\": \"textarea\",\n      \"autosize\": {\n        minRows: 4,\n        maxRows: 8\n      },\n      \"placeholder\": \"请填写查询说明\"\n    },\n    model: {\n      value: (_vm.step.opinion),\n      callback: function($$v) {\n        _vm.$set(_vm.step, \"opinion\", $$v)\n      },\n      expression: \"step.opinion\"\n    }\n  })], 1), _vm._v(\" \"), _c('FormItem', {\n    attrs: {\n      \"label\": \"\"\n    }\n  }, [_c('Button', {\n    staticStyle: {\n      \"width\": \"100px\"\n    },\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.handleSubmit\n    }\n  }, [_vm._v(\"提交\")])], 1)], 1)], 1)], 1), _vm._v(\" \"), _c('Steps', {\n    staticStyle: {\n      \"margin-left\": \"10%\"\n    }\n  }, _vm._l((_vm.stepList1), function(item) {\n    return _c('Step', {\n      key: item.title,\n      attrs: {\n        \"title\": item.title,\n        \"content\": item.describe\n      }\n    })\n  }), 1)], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2f7ff72a\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/query/workFlow.vue\n// module id = 211\n// module chunks = 1 13","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2f7ff72a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./workFlow.vue\")\n}\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./workFlow.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2f7ff72a\\\",\\\"hasScoped\\\":false}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./workFlow.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/query/workFlow.vue\n// module id = 77\n// module chunks = 1 13"],"sourceRoot":""}