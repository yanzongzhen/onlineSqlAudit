webpackJsonp([17],{295:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=r.n(o);t.default={name:"Query_audit",data:function(){var e=this;return{query_info:[],permissoncolums:[{type:"selection",width:60,align:"center"},{title:"申请编号",key:"work_id"},{title:"时间",key:"time"},{title:"查询说明",key:"instructions",tooltip:!0},{title:"申请人",key:"username"},{title:"真实姓名",key:"real_name"},{title:"状态",key:"query_per",width:150,render:function(e,t){var r=t.row,o="",n="";return 2===r.query_per?(o="primary",n="待审核"):0===r.query_per?(o="error",n="驳回"):1===r.query_per?(o="success",n="同意"):(o="warning",n="查询结束"),e("Tag",{props:{type:"dot",color:o}},n)},sortable:!0,filters:[{label:"同意",value:1},{label:"驳回",value:0},{label:"待审核",value:2},{label:"查询结束",value:3}],filterMethod:function(e,t){return 1===e?1===t.query_per:2===e?2===t.query_per:0===e?0===t.query_per:3===e?3===t.query_per:void 0}},{title:"操作",key:"action",width:200,align:"center",render:function(t,r){return 1===r.row.query_per?t("div",[t("Button",{props:{size:"small",type:"text"},on:{click:function(){e.modalinfo(r.row)}}},"查看"),t("Button",{props:{size:"small",type:"text"},on:{click:function(){e.stop_query(r.row)}}},"中止查询")]):t("div",[t("Button",{props:{size:"small",type:"text"},on:{click:function(){e.modalinfo(r.row)}}},"查看")])}}],per_pn:1,delrecord:[],editInfodModal:!1,query:{},find:{picker:[],user:"",valve:!1}}},methods:{permisson_list:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n.a.get(this.$config.url+"/query_order?page="+t+"&query="+JSON.stringify(this.find)).then(function(t){e.query_info=t.data.data,e.per_pn=t.data.pn}).catch(function(t){e.$config.err_notice(e,t)})},delrecordData:function(){var e=this;n.a.post(this.$config.url+"/query_order/",{work_id:JSON.stringify(this.delrecord)}).then(function(t){e.$config.notice(t.data),e.$refs.perpage.currentPage=1,e.permisson_list()}).catch(function(t){e.$config.err_notice(e,t)})},delrecordList:function(e){this.delrecord=e.map(function(e){return e.work_id})},modalinfo:function(e){this.editInfodModal=!0,this.query=e},savedata:function(){var e=this;n.a.put(this.$config.url+"/query_worklf/",{mode:"agree",work_id:this.query.work_id}).then(function(t){e.$config.notice(t.data),e.editInfodModal=!1,e.$refs.perpage.currentPage=1,e.permisson_list()}).catch(function(t){e.$config.err_notice(e,t)})},reject:function(){var e=this;n.a.put(this.$config.url+"/query_worklf/",{mode:"disagree",work_id:this.query.work_id}).then(function(t){e.$config.notice(t.data),e.editInfodModal=!1,e.$refs.perpage.currentPage=1,e.permisson_list()}).catch(function(t){e.$config.err_notice(e,t)})},stop_query:function(e){var t=this;n.a.put(this.$config.url+"/query_worklf",{mode:"end",username:e.username}).then(function(e){t.$config.notice(e.data),t.permisson_list()}).catch(function(e){return t.$config.err_notice(t,e)})},queryData:function(){this.find.valve=!0,this.permisson_list()},queryCancel:function(){this.find=this.$config.clearObj(this.find),this.permisson_list()}},mounted:function(){this.permisson_list()}}},337:function(e,t,r){t=e.exports=r(75)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"queryAudit.vue",sourceRoot:""}])},615:function(e,t,r){var o=r(337);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r(76)("2a25efb9",o,!0,{})},651:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Row",[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"md-person"}}),e._v("\n        查询审核\n      ")],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"24"}},[r("Form",{attrs:{inline:""}},[r("FormItem",[r("Poptip",{attrs:{confirm:"",title:"您确认删除这些工单信息吗?"},on:{"on-ok":e.delrecordData}},[r("Button",{attrs:{type:"warning"}},[e._v("删除记录")])],1)],1),e._v(" "),r("FormItem",[r("Input",{attrs:{placeholder:"账号名"},model:{value:e.find.user,callback:function(t){e.$set(e.find,"user",t)},expression:"find.user"}})],1),e._v(" "),r("FormItem",[r("DatePicker",{staticStyle:{width:"250px"},attrs:{format:"yyyy-MM-dd HH:mm",type:"datetimerange",placeholder:"请选择查询的时间范围"},on:{"on-change":function(t){e.find.picker=t}},model:{value:e.find.picker,callback:function(t){e.$set(e.find,"picker",t)},expression:"find.picker"}})],1),e._v(" "),r("FormItem",[r("Button",{attrs:{type:"success"},on:{click:e.queryData}},[e._v("查询")]),e._v(" "),r("Button",{attrs:{type:"primary"},on:{click:e.queryCancel}},[e._v("重置")])],1)],1),e._v(" "),r("Table",{ref:"selection",attrs:{border:"",columns:e.permissoncolums,data:e.query_info,stripe:""},on:{"on-selection-change":e.delrecordList}}),e._v(" "),r("br"),e._v(" "),r("Page",{ref:"perpage",attrs:{total:e.per_pn,"show-elevator":"","page-size":20},on:{"on-change":e.permisson_list}})],1)],1)],1)],1),e._v(" "),r("Modal",{attrs:{width:800},model:{value:e.editInfodModal,callback:function(t){e.editInfodModal=t},expression:"editInfodModal"}},[r("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[e._v("查询申请单详细内容")]),e._v(" "),r("Form",{attrs:{"label-width":120,"label-position":"right"}},[r("FormItem",{attrs:{label:"机房"}},[r("p",[e._v(e._s(e.query.computer_room))])]),e._v(" "),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),e._v(" "),r("br"),e._v(" "),r("FormItem",{attrs:{label:"连接名:"}},[r("p",[e._v(e._s(e.query.connection_name))])]),e._v(" "),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),e._v(" "),r("br"),e._v(" "),r("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px dashed #dddee1"}}),e._v(" "),r("br"),e._v(" "),r("FormItem",{attrs:{label:"导出数据:"}},[1===e.query.export?r("p",[e._v("是")]):r("p",[e._v("否")])])],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.editInfodModal=!1}}},[e._v("取消")]),e._v(" "),2===e.query.query_per?r("Button",{attrs:{type:"error"},on:{click:e.reject}},[e._v("驳回")]):e._e(),e._v(" "),2===e.query.query_per?r("Button",{attrs:{type:"success"},on:{click:e.savedata}},[e._v("同意")]):e._e()],1)],1)],1)},staticRenderFns:[]}},82:function(e,t,r){function o(e){r(615)}var n=r(1)(r(295),r(651),o,"data-v-76bda50b",null);e.exports=n.exports}});
//# sourceMappingURL=17.72a55fcc72babcb4f4dd.js.map